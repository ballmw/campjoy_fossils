App.WindowApp=Ext.extend(Ext.Panel,{fullscreen:true,layout:"card",modalWidth:400,modalHeight:300,cls:"windowPanel",monitorOrientation:true,cardSwitchAnimation:{type:"slide",cover:true},defaults:{scroll:false},initComponent:function(){this.homeView=new App.views.Home({iconCls:"home",title:"Home"});this.keyView=new App.views.DichotemousKey({iconCls:"maps",title:"Dichotemous Key"});this.catalogView=new App.views.Catalog({iconCls:"rss",title:"Catalog"});var b=[{text:"Home",card:this.homeView},{text:"Dichotemous Key",card:this.keyView},{text:"Catalog",card:this.catalogView}];Ext.regModel("ListItem",{fields:[{name:"text"}]});var a=new Ext.data.Store({model:"ListItem",data:b});this.navigationPanel=new Ext.List({cls:"navigationPanel",store:a,dock:"left",hidden:false,width:276,height:215,itemTpl:Ext.XTemplate.from("nav")});this.navigationButton=new Ext.Button({text:"Menu",handler:this.onNavButtonTap,scope:this});this.toolbar=new Ext.Toolbar({dock:"top",items:[this.navigationButton]});this.dockedItems=App.orientation==="landscape"?[this.navigationPanel]:[this.toolbar];this.items=[this.homeView,this.keyView,this.catalogView];App.WindowApp.superclass.initComponent.call(this);this.navigationPanel.on("itemtap",this.onMenuSelect,this);if(App.orientation=="portrait"){this.displayPortrait()}else{this.displayLandscape()}},onNavButtonTap:function(){this.navigationPanel.showBy(this.navigationButton,"fade")},onMenuSelect:function(c,b,f,g){var a=c.getStore();var d=a.getAt(b).data;App.viewport.setActiveItem(d.card);if(App.orientation==="portrait"){this.navigationPanel.hide()}},displayPortrait:function(){this.navigationPanel.setFloating(true);this.navigationPanel.setHeight(215);this.navigationPanel.addCls("portraitNav");this.removeDocked(this.navigationPanel,false);this.navigationButton.show(false);this.insertDocked(0,this.toolbar)},displayLandscape:function(){this.navigationPanel.setFloating(false);this.navigationPanel.removeCls("portraitNav");this.navigationPanel.setHeight(window.innerHeight-1);this.navigationPanel.show(false);this.navigationButton.hide(false);this.removeDocked(this.toolbar,false);this.insertDocked(0,this.navigationPanel)}});