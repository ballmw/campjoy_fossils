App.views.Specimen=Ext.extend(Ext.Panel,{cls:"customPanel",back_name:"home",fullscreen:false,layout:{type:"vbox",align:"stretch",pack:"center"},defaults:{flex:1},dockedItems:[{xtype:"toolbar",ui:"light",cls:"header",items:[{text:"Back",ui:"back",scope:this,handler:function(){App.viewport.navTo(App.viewport.specimenView.back_name)}},{xtype:"spacer"},{text:"More Info",width:120,scope:this,handler:function(b){var a=new Ext.Panel({hidden:true,tpl:Ext.XTemplate.from("specimenDetail"),floating:true,modal:true,centered:true,scroll:true,styleHtmlContent:true});a.update(App.viewport.specimenView.specimen);a.setWidth(App.viewport.modalWidth);a.setHeight(App.viewport.modalHeight);a.show()}},{xtype:"spacer"},{text:"Home",handler:function(){App.viewport.navTo("home")}}],dock:"top"}],initComponent:function(){this.specimenPanel=new Ext.Panel({fullscreen:true,layout:{type:"vbox",align:"stretch",pack:"center"},defaults:{}});this.items=[this.specimenPanel];App.views.Specimen.superclass.initComponent.call(this)},refresh:function(){this.specimenPanel.doLayout()},getIllustrationHtml:function(){var a="";if(this.specimen.drawing_image&&this.specimen.drawing_image.length>0){a+="<br /><br />Illustration(s):"}Ext.each(this.specimen.drawing_image,function(b){a+='<br /><img src="images/'+b+'" onload="App.viewport.specimenView.refresh();" width="100%" />'});return a},getSpecimenPanel:function(){var a=[];Ext.each(this.specimen.photo_image,function(b){a.push({html:'<div style="margin:0 auto; width:200px;"><img src="images/'+b+'" height="120" width="200px" /></div>'})});return new Ext.Panel({items:[(a.length>1)?new Ext.Carousel({items:a,height:150}):a[0]]})},getShortDescriptionHtml:function(){if(!this.specimen.short_description){return""}return"<br />"+(this.specimen.short_description||"")},listeners:{show:function(){this.specimenPanel.removeAll();this.scroller.scrollTo({x:0,y:0});this.specimenPanel.add(new Ext.Container({html:'<div class="specimenName">'+this.specimen.name+"</div>",height:30}));this.specimenPanel.add(this.getSpecimenPanel());this.specimenPanel.add(new Ext.Container({html:'<div style="padding-right:10px;">'+this.getShortDescriptionHtml()+"</div>"}));this.specimenPanel.doComponentLayout();this.specimenPanel.doLayout()}}});